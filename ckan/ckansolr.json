{
    "key": "ckansolr",
    "description": "Solr intended for use with CKAN",
    "access": "internal",
    "info": "https://nationaldataservice.atlassian.net/wiki/display/NDSC/CKAN",
    "label": "Solr for CKAN",
    "image": {
    "name": "ckan/solr",
    "tags": ["release-v2.3.5"]
    },
    "ports": [
        { "port": 8983, "protocol": "tcp", "contextPath": "/" }
    ],
    "volumeMounts":[
        { "mountPath": "/opt/solr/server/solr/ckan/data" }
    ],
    "readinessProbe" : {
        "type" : "http",
        "path" : "/solr",
        "port" : 8983,
        "initialDelay": 30,
        "timeout" : 360
    },
    "config":  [
        {
            "name": "DB_ENV_POSTGRES_DB",
            "useFrom": "postgres.POSTGRES_DB",
            "canOverride": false
        },
        {
            "name": "DB_ENV_POSTGRES_USER",
            "useFrom": "postgres.POSTGRES_USER",
            "canOverride": false
        },
        {
            "name": "DB_ENV_POSTGRES_PASSWORD",
            "useFrom": "postgres.POSTGRES_PASSWORD",
            "canOverride": false
        },
        {
            "name": "DB_PORT_5432_TCP_ADDR",
            "value": "$(POSTGRES_PORT_5432_TCP_ADDR)",
            "canOverride": false
        },
        {
            "name": "DB_PORT_5432_TCP_PORT",
            "value": "5432",
            "canOverride": false
        }
    ],
    "resourceLimits": {
        "cpuMax": 200,
        "cpuDefault": 100,
        "memMax": 500,
        "memDefault": 200
    },
    "tags" : ["23"]
}


